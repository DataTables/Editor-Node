{"version":3,"sources":["validators.ts"],"names":[],"mappings":"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","file":"validators.js","sourcesContent":["import * as knex from 'knex';\nimport { Knex } from 'knex';\nimport * as moment from 'moment';\nimport * as validUrl from 'valid-url';\n\nimport Editor from './editor';\nimport Field from './field';\nimport { IMjoinValidator } from './mjoin';\nimport { default as JoinOptions } from './options';\nimport { IFile } from './upload';\nimport ValidationHost from './validationHost';\nimport ValidationOptions from './validationOptions';\n\n// Note that validators return a Promise to allow async validators, such as\n// checking a value is unique against the database\nexport type IValidator = (val: any, data: object, host: ValidationHost) => Promise<true | string>;\nexport type IFileValidator = (file: IFile) => Promise<true | string>;\n\n/**\n * Validation methods for DataTables Editor fields. All of the methods\n * defined in this class return a function that can be used by\n * {@link Field} instance's {@link Field.Validator} method.\n *\n * Each method may define its own parameters that configure how the\n * formatter operates. For example the `minLen` validator takes information\n * on the minimum length of value to accept.\n *\n * Additionally each method can optionally take a `ValidationOptions`\n * instance that controls common validation options and error messages.\n *\n * The validation functions return `true` for valid data and a string for\n * invalid data, with the string being the error message.\n *\n * @export\n * @class Validator\n */\nexport default class Validator {\n\tpublic static Options = ValidationOptions;\n\tpublic static Host = ValidationHost;\n\n\t/**\n\t * No validation - all inputs are valid\n\t *\n\t * @static\n\t * @param {ValidationOptions} [cfg=null] Validation options\n\t * @returns {IValidator} Configured validation function\n\t */\n\tpublic static none(cfg: ValidationOptions | null = null): IValidator {\n\t\treturn async function (\n\t\t\tval: any,\n\t\t\tdata: object,\n\t\t\thost: ValidationHost\n\t\t): Promise<true | string> {\n\t\t\treturn true;\n\t\t};\n\t}\n\n\t/**\n\t * Basic validation - this is used to perform the validation provided by the\n\t * validation options only. If the validation options pass (e.g. `required`,\n\t * `empty` and `optional`) then the validation will pass regardless of the\n\t * actual value.\n\t *\n\t * @static\n\t * @param {ValidationOptions} [cfg=null] Validation options\n\t * @returns {IValidator} Configured validation function\n\t */\n\tpublic static basic(cfg: ValidationOptions | null = null): IValidator {\n\t\tlet opts = ValidationOptions.select(cfg);\n\n\t\treturn async function (\n\t\t\tval: any,\n\t\t\tdata: object,\n\t\t\thost: ValidationHost\n\t\t): Promise<true | string> {\n\t\t\tlet common = Validator._common(val, opts, data, host);\n\n\t\t\treturn common === false ? opts.message() : true;\n\t\t};\n\t}\n\n\t/**\n\t * Required field - there must be a value and it must be a non-empty value\n\t *\n\t * @static\n\t * @param {ValidationOptions} [cfg=null] Validation options\n\t * @returns {IValidator} Configured validation function\n\t */\n\tpublic static required(cfg: ValidationOptions | null = null): IValidator {\n\t\tlet opts = ValidationOptions.select(cfg);\n\t\topts.empty(false);\n\t\topts.optional(false);\n\n\t\treturn async function (\n\t\t\tval: any,\n\t\t\tdata: object,\n\t\t\thost: ValidationHost\n\t\t): Promise<true | string> {\n\t\t\tlet common = Validator._common(val, opts, data, host);\n\n\t\t\treturn common === false ? opts.message() : true;\n\t\t};\n\t}\n\n\t/**\n\t * Optional field, but if given there must be a non-empty value\n\t *\n\t * @static\n\t * @param {ValidationOptions} [cfg=null] Validation options\n\t * @returns {IValidator} Configured validation function\n\t */\n\tpublic static notEmpty(cfg: ValidationOptions | null = null): IValidator {\n\t\tlet opts = ValidationOptions.select(cfg);\n\t\topts.empty(false);\n\n\t\treturn async function (\n\t\t\tval: any,\n\t\t\tdata: object,\n\t\t\thost: ValidationHost\n\t\t): Promise<true | string> {\n\t\t\tlet common = Validator._common(val, opts, data, host);\n\n\t\t\treturn common === false ? opts.message() : true;\n\t\t};\n\t}\n\n\t/**\n\t * Validate an input as a boolean value.\n\t *\n\t * @static\n\t * @param {ValidationOptions} [cfg=null] Validation options\n\t * @returns {IValidator} Configured validation function\n\t */\n\tpublic static boolean(cfg: ValidationOptions | null = null): IValidator {\n\t\tlet opts = ValidationOptions.select(cfg);\n\n\t\treturn async function (\n\t\t\tval: any,\n\t\t\tdata: object,\n\t\t\thost: ValidationHost\n\t\t): Promise<true | string> {\n\t\t\tlet common = Validator._common(val, opts, data, host);\n\t\t\tif (common !== null) {\n\t\t\t\treturn common === false ? opts.message() : true;\n\t\t\t}\n\n\t\t\tif (typeof val === 'string') {\n\t\t\t\tval = val.toLocaleLowerCase();\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tval === true ||\n\t\t\t\tval === 1 ||\n\t\t\t\tval === '1' ||\n\t\t\t\tval === 'true' ||\n\t\t\t\tval === 't' ||\n\t\t\t\tval === 'on' ||\n\t\t\t\tval === 'yes' ||\n\t\t\t\tval === 'âœ“' ||\n\t\t\t\tval === 'x' ||\n\t\t\t\tval === false ||\n\t\t\t\tval === 0 ||\n\t\t\t\tval === '0' ||\n\t\t\t\tval === 'false' ||\n\t\t\t\tval === 'f' ||\n\t\t\t\tval === 'off' ||\n\t\t\t\tval === 'no'\n\t\t\t) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn opts.message();\n\t\t};\n\t}\n\n\t/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n\t * Number validation methods\n\t */\n\n\t/**\n\t * Check that any input is numeric.\n\t *\n\t * @static\n\t * @param {string} [decimal='.'] Character to use as the decimal place\n\t * @param {ValidationOptions} [cfg=null] Validation options\n\t * @returns {IValidator} Configured validation function\n\t */\n\tpublic static numeric(decimal: string = '.', cfg: ValidationOptions | null = null): IValidator {\n\t\tlet opts = ValidationOptions.select(cfg);\n\n\t\treturn async function (\n\t\t\tval: any,\n\t\t\tdata: object,\n\t\t\thost: ValidationHost\n\t\t): Promise<true | string> {\n\t\t\tlet common = Validator._common(val, opts, data, host);\n\t\t\tif (common !== null) {\n\t\t\t\treturn common === false ? opts.message() : true;\n\t\t\t}\n\n\t\t\tif (typeof val === 'number') {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif (decimal !== '.') {\n\t\t\t\tval = val.toString().replace(decimal, '.');\n\t\t\t}\n\n\t\t\tval = val.trim();\n\t\t\tif (val === '') {\n\t\t\t\treturn opts.message();\n\t\t\t}\n\n\t\t\treturn isNaN(Number(val)) ? opts.message() : true;\n\t\t};\n\t}\n\n\t/**\n\t * Check for a numeric input and that it is greater than a given value.\n\t *\n\t * @static\n\t * @param {number} min Minimum value\n\t * @param {string} [decimal='.'] Character to use as the decimal place\n\t * @param {ValidationOptions} [cfg=null] Validation options\n\t * @returns {IValidator} Configured validation function\n\t */\n\tpublic static minNum(\n\t\tmin: number,\n\t\tdecimal: string = '.',\n\t\tcfg: ValidationOptions | null = null\n\t): IValidator {\n\t\tlet opts = ValidationOptions.select(cfg);\n\n\t\treturn async function (\n\t\t\tval: any,\n\t\t\tdata: object,\n\t\t\thost: ValidationHost\n\t\t): Promise<true | string> {\n\t\t\tlet numeric = await Validator.numeric(decimal, opts)(val, data, host);\n\t\t\tif (numeric !== null) {\n\t\t\t\treturn numeric;\n\t\t\t}\n\n\t\t\t// val.toString() for '' is 0, which would mean it would always fail, even if empty values\n\t\t\t// are allowed.\n\t\t\tif (val === '' && opts.empty()) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif (decimal !== '.') {\n\t\t\t\tval = val.toString().replace(decimal, '.');\n\t\t\t}\n\n\t\t\treturn val < min ? opts.message() : true;\n\t\t};\n\t}\n\n\t/**\n\t * Check for a numeric input and that it is less than a given value.\n\t *\n\t * @static\n\t * @param {number} max Maximum value\n\t * @param {string} [decimal='.'] Character to use as the decimal place\n\t * @param {ValidationOptions} [cfg=null] Validation options\n\t * @returns {IValidator} Configured validation function\n\t */\n\tpublic static maxNum(\n\t\tmax: number,\n\t\tdecimal: string = '.',\n\t\tcfg: ValidationOptions | null = null\n\t): IValidator {\n\t\tlet opts = ValidationOptions.select(cfg);\n\n\t\treturn async function (\n\t\t\tval: any,\n\t\t\tdata: object,\n\t\t\thost: ValidationHost\n\t\t): Promise<true | string> {\n\t\t\tlet numeric = await Validator.numeric(decimal, opts)(val, data, host);\n\t\t\tif (numeric !== null) {\n\t\t\t\treturn numeric;\n\t\t\t}\n\n\t\t\tif (decimal !== '.') {\n\t\t\t\tval = val.toString().replace(decimal, '.');\n\t\t\t}\n\n\t\t\treturn val > max ? opts.message() : true;\n\t\t};\n\t}\n\n\t/**\n\t * Check for a numeric input and that it is in between two given values.\n\t *\n\t * @static\n\t * @param {number} min Minimum value\n\t * @param {number} max Maximum value\n\t * @param {string} [decimal='.'] Character to use as the decimal place\n\t * @param {ValidationOptions} [cfg=null] Validation options\n\t * @returns {IValidator} Configured validation function\n\t */\n\tpublic static minMaxNum(\n\t\tmin: number,\n\t\tmax: number,\n\t\tdecimal: string = '.',\n\t\tcfg: ValidationOptions | null = null\n\t): IValidator {\n\t\tlet opts = ValidationOptions.select(cfg);\n\n\t\treturn async function (\n\t\t\tval: any,\n\t\t\tdata: object,\n\t\t\thost: ValidationHost\n\t\t): Promise<true | string> {\n\t\t\tlet numeric = await Validator.numeric(decimal, opts)(val, data, host);\n\t\t\tif (numeric !== null) {\n\t\t\t\treturn numeric;\n\t\t\t}\n\n\t\t\tif (decimal !== '.') {\n\t\t\t\tval = val.toString().replace(decimal, '.');\n\t\t\t}\n\n\t\t\treturn val < min || val > max ? opts.message() : true;\n\t\t};\n\t}\n\n\t/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n\t * String validation methods\n\t */\n\n\t/**\n\t * Validate an input as an e-mail address.\n\t *\n\t * @static\n\t * @param {ValidationOptions} [cfg=null] Validation options\n\t * @returns {IValidator} Configured validation function\n\t */\n\tpublic static email(cfg: ValidationOptions | null = null): IValidator {\n\t\tlet opts = ValidationOptions.select(cfg);\n\n\t\treturn async function (\n\t\t\tval: any,\n\t\t\tdata: object,\n\t\t\thost: ValidationHost\n\t\t): Promise<true | string> {\n\t\t\tlet common = Validator._common(val, opts, data, host);\n\t\t\tif (common !== null) {\n\t\t\t\treturn common === false ? opts.message() : true;\n\t\t\t}\n\n\t\t\tlet re =\n\t\t\t\t/^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i;\n\n\t\t\treturn re.test(val) ? true : opts.message();\n\t\t};\n\t}\n\n\t/**\n\t * Validate a string has a minimum length.\n\t *\n\t * @static\n\t * @param {number} min Minimum length\n\t * @param {ValidationOptions} [cfg=null] Validation options\n\t * @returns {IValidator} Configured validation function\n\t */\n\tpublic static minLen(min: number, cfg: ValidationOptions | null = null): IValidator {\n\t\tlet opts = ValidationOptions.select(cfg);\n\n\t\treturn async function (\n\t\t\tval: any,\n\t\t\tdata: object,\n\t\t\thost: ValidationHost\n\t\t): Promise<true | string> {\n\t\t\tlet common = Validator._common(val, opts, data, host);\n\t\t\tif (common !== null) {\n\t\t\t\treturn common === false ? opts.message() : true;\n\t\t\t}\n\n\t\t\treturn val.length < min ? opts.message() : true;\n\t\t};\n\t}\n\n\t/**\n\t * Validate a string is less or equal to a maximum length.\n\t *\n\t * @static\n\t * @param {number} max Maximum length\n\t * @param {ValidationOptions} [cfg=null] Validation options\n\t * @returns {IValidator} Configured validation function\n\t */\n\tpublic static maxLen(max: number, cfg: ValidationOptions | null = null): IValidator {\n\t\tlet opts = ValidationOptions.select(cfg);\n\n\t\treturn async function (\n\t\t\tval: any,\n\t\t\tdata: object,\n\t\t\thost: ValidationHost\n\t\t): Promise<true | string> {\n\t\t\tlet common = Validator._common(val, opts, data, host);\n\t\t\tif (common !== null) {\n\t\t\t\treturn common === false ? opts.message() : true;\n\t\t\t}\n\n\t\t\treturn val.length > max ? opts.message() : true;\n\t\t};\n\t}\n\n\t/**\n\t * Require a string with a certain minimum or maximum number of characters.\n\t *\n\t * @static\n\t * @param {number} min Minimum length\n\t * @param {number} max Maximum length\n\t * @param {ValidationOptions} [cfg=null] Validation options\n\t * @returns {IValidator} Configured validation function\n\t */\n\tpublic static minMaxLen(\n\t\tmin: number,\n\t\tmax: number,\n\t\tcfg: ValidationOptions | null = null\n\t): IValidator {\n\t\tlet opts = ValidationOptions.select(cfg);\n\n\t\treturn async function (\n\t\t\tval: any,\n\t\t\tdata: object,\n\t\t\thost: ValidationHost\n\t\t): Promise<true | string> {\n\t\t\tlet common = Validator._common(val, opts, data, host);\n\t\t\tif (common !== null) {\n\t\t\t\treturn common === false ? opts.message() : true;\n\t\t\t}\n\n\t\t\treturn val.length < min || val.length > max ? opts.message() : true;\n\t\t};\n\t}\n\n\t/**\n\t * Validate as an IP address.\n\t *\n\t * @static\n\t * @param {ValidationOptions} [cfg=null] Validation options\n\t * @returns {IValidator} Configured validation function\n\t */\n\tpublic static ip(cfg: ValidationOptions | null = null): IValidator {\n\t\tlet opts = ValidationOptions.select(cfg);\n\n\t\treturn async function (\n\t\t\tval: any,\n\t\t\tdata: object,\n\t\t\thost: ValidationHost\n\t\t): Promise<true | string> {\n\t\t\tlet common = Validator._common(val, opts, data, host);\n\t\t\tif (common !== null) {\n\t\t\t\treturn common === false ? opts.message() : true;\n\t\t\t}\n\n\t\t\tlet a = val.split('.');\n\t\t\tif (a.length !== 4) {\n\t\t\t\treturn opts.message();\n\t\t\t}\n\n\t\t\tfor (let i = 0; i < 4; i++) {\n\t\t\t\tlet parsed = parseInt(a[i], 10);\n\t\t\t\tif (parsed !== a[i] * 1) {\n\t\t\t\t\treturn opts.message();\n\t\t\t\t}\n\n\t\t\t\tif (parsed < 0 || parsed > 255) {\n\t\t\t\t\treturn opts.message();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn true;\n\t\t};\n\t}\n\n\t/**\n\t * Validate as a URL.\n\t *\n\t * @static\n\t * @param {ValidationOptions} [cfg=null] Validation options\n\t * @returns {IValidator} Configured validation function\n\t */\n\tpublic static url(cfg: ValidationOptions | null = null): IValidator {\n\t\tlet opts = ValidationOptions.select(cfg);\n\n\t\treturn async function (\n\t\t\tval: any,\n\t\t\tdata: object,\n\t\t\thost: ValidationHost\n\t\t): Promise<true | string> {\n\t\t\tlet common = Validator._common(val, opts, data, host);\n\t\t\tif (common !== null) {\n\t\t\t\treturn common === false ? opts.message() : true;\n\t\t\t}\n\n\t\t\treturn !validUrl.isWebUri(val) ? opts.message() : true;\n\t\t};\n\t}\n\n\t/**\n\t * Check if string could contain an XSS attack string\n\t *\n\t * @static\n\t * @param {ValidationOptions} [cfg=null] Validation options\n\t * @returns {IValidator} Configured validation function\n\t */\n\tpublic static xss(cfg: ValidationOptions | null = null): IValidator {\n\t\tlet opts = ValidationOptions.select(cfg);\n\n\t\treturn async function (\n\t\t\tval: any,\n\t\t\tdata: object,\n\t\t\thost: ValidationHost\n\t\t): Promise<true | string> {\n\t\t\tlet common = Validator._common(val, opts, data, host);\n\t\t\tif (common !== null) {\n\t\t\t\treturn common === false ? opts.message() : true;\n\t\t\t}\n\n\t\t\tlet field = host.field;\n\n\t\t\treturn field.xssSafety(val) !== val ? opts.message() : true;\n\t\t};\n\t}\n\n\t/**\n\t * Confirm that the value submitted is in a list of allowable values\n\t *\n\t * @static\n\t * @param {any[]} values List of values that are valid\n\t * @param {ValidationOptions} [cfg=null] Validation options\n\t * @returns {IValidator} Configured validation function\n\t */\n\tpublic static values(values: any[], cfg: ValidationOptions | null = null): IValidator {\n\t\tlet opts = ValidationOptions.select(cfg);\n\n\t\treturn async function (\n\t\t\tval: any,\n\t\t\tdata: object,\n\t\t\thost: ValidationHost\n\t\t): Promise<true | string> {\n\t\t\tlet common = Validator._common(val, opts, data, host);\n\t\t\tif (common !== null) {\n\t\t\t\treturn common === false ? opts.message() : true;\n\t\t\t}\n\n\t\t\treturn values.includes(val) ? true : opts.message();\n\t\t};\n\t}\n\n\t/**\n\t * Ensure that the submitted string does not contain HTML tags\n\t *\n\t * @static\n\t * @param {ValidationOptions} [cfg=null] Validation options\n\t * @returns {IValidator} Configured validation function\n\t */\n\tpublic static noTags(cfg: ValidationOptions | null = null): IValidator {\n\t\tlet opts = ValidationOptions.select(cfg);\n\n\t\treturn async function (\n\t\t\tval: any,\n\t\t\tdata: object,\n\t\t\thost: ValidationHost\n\t\t): Promise<true | string> {\n\t\t\tlet common = Validator._common(val, opts, data, host);\n\t\t\tif (common !== null) {\n\t\t\t\treturn common === false ? opts.message() : true;\n\t\t\t}\n\n\t\t\treturn val.toString().test(/<.*>/) ? opts.message() : true;\n\t\t};\n\t}\n\n\t/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n\t * Date validation methods\n\t */\n\n\t/**\n\t * Check that a valid date input is given. Uses MomentJS\n\t *\n\t * @static\n\t * @param {string} format MomentJS date format\n\t * @param {string} [locale=null] MomentJS locale\n\t * @param {ValidationOptions} [cfg=null] Validation options\n\t * @returns {IValidator} Configured validation function\n\t */\n\tpublic static dateFormat(\n\t\tformat: string,\n\t\tlocale: string | null = null,\n\t\tcfg: ValidationOptions | null = null\n\t): IValidator {\n\t\tlet opts = ValidationOptions.select(cfg);\n\n\t\treturn async function (\n\t\t\tval: any,\n\t\t\tdata: object,\n\t\t\thost: ValidationHost\n\t\t): Promise<true | string> {\n\t\t\tlet common = Validator._common(val, opts, data, host);\n\t\t\tif (common !== null) {\n\t\t\t\treturn common === false ? opts.message() : true;\n\t\t\t}\n\n\t\t\tlet res = locale\n\t\t\t\t? moment(val, format, locale, true).isValid()\n\t\t\t\t: moment(val, format, true).isValid();\n\n\t\t\treturn !res ? opts.message() : true;\n\t\t};\n\t}\n\n\t/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n\t * Database validation\n\t */\n\n\t/**\n\t * Check that the given value is unique in the database\n\t *\n\t * @static\n\t * @param {ValidationOptions} [cfg=null] Validation options\n\t * @param {string} [column=null] Column name to use to check as a unique\n\t *   value. If not given the host field's database column name is used\n\t * @param {string} [table=null] Table to check that this value is uniquely\n\t *   valid on. If not given the host Editor's table name is used\n\t * @param {Knex} [db=null] Database connection. If not given the host\n\t *   Editor's database connection is used\n\t * @returns {IValidator} Configured validation function\n\t */\n\tpublic static dbUnique(\n\t\tcfg: ValidationOptions | null = null,\n\t\tcolumn: string | null = null,\n\t\ttable: string | null = null,\n\t\tdb: Knex | null = null\n\t): IValidator {\n\t\tlet opts = ValidationOptions.select(cfg);\n\n\t\treturn async function (\n\t\t\tval: any,\n\t\t\tdata: object,\n\t\t\thost: ValidationHost\n\t\t): Promise<true | string> {\n\t\t\tlet common = Validator._common(val, opts, data, host);\n\t\t\tif (common !== null) {\n\t\t\t\treturn common === false ? opts.message() : true;\n\t\t\t}\n\n\t\t\tif (db === null) {\n\t\t\t\tdb = host.db;\n\t\t\t}\n\n\t\t\tif (table === null) {\n\t\t\t\ttable = host.editor.table()[0];\n\t\t\t}\n\n\t\t\tif (column === null) {\n\t\t\t\tcolumn = host.field.dbField();\n\t\t\t}\n\n\t\t\tlet q = db\n\t\t\t\t.table(table)\n\t\t\t\t.select(column)\n\t\t\t\t.where({ [column]: val });\n\n\t\t\t// If doing an edit then we need to also discount the current row,\n\t\t\t// since it is of course already validly unique\n\t\t\tif (host.action === 'edit') {\n\t\t\t\tlet cond = host.editor.pkeyToObject(host.id, true);\n\t\t\t\tq.whereNot(cond);\n\t\t\t}\n\n\t\t\tlet res = await q;\n\n\t\t\treturn res.length ? opts.message() : true;\n\t\t};\n\t}\n\n\t/**\n\t * Check that the given value is a value that is available in a database -\n\t * i.e. a join primary key. This will attempt to automatically use the table\n\t * name and value column from the field's `Options` method (under the\n\t * assumption that it will typically be used with a joined field), but the\n\t * table and field can also be specified via the options.\n\t *\n\t * @static\n\t * @param {ValidationOptions} [cfg=null] Validation options\n\t * @param {string} [column=null] Column name to use to check as a unique\n\t *   value. If not given the host field's database column name is used\n\t * @param {string} [table=null] Table to check that this value is uniquely\n\t *   valid on. If not given the host Editor's table name is used\n\t * @param {Knex} [db=null] Database connection. If not given the host\n\t *   Editor's database connection is used\n\t * @returns {IValidator} Configured validation function\n\t */\n\tpublic static dbValues(\n\t\tcfg: ValidationOptions | null = null,\n\t\tcolumn: string | null = null,\n\t\ttable: string | null = null,\n\t\tdb: Knex | null = null,\n\t\tvalues: any[] = []\n\t): IValidator {\n\t\tlet opts = ValidationOptions.select(cfg);\n\n\t\treturn async function (\n\t\t\tval: any,\n\t\t\tdata: object,\n\t\t\thost: ValidationHost\n\t\t): Promise<true | string> {\n\t\t\tlet common = Validator._common(val, opts, data, host);\n\t\t\tlet options = host.field.options();\n\n\t\t\tif (common !== null) {\n\t\t\t\treturn common === false ? opts.message() : true;\n\t\t\t}\n\n\t\t\tif (values.indexOf(val) !== -1) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif (db === null) {\n\t\t\t\tdb = host.db;\n\t\t\t}\n\n\t\t\tif (table === null && options instanceof JoinOptions) {\n\t\t\t\ttable = options.table();\n\t\t\t}\n\n\t\t\tif (column === null && options instanceof JoinOptions) {\n\t\t\t\tcolumn = options.value();\n\t\t\t}\n\n\t\t\tif (table === null || column === null) {\n\t\t\t\tthrow new Error(\n\t\t\t\t\t'Table or column for database value check is not ' +\n\t\t\t\t\t\t'defined for field ' +\n\t\t\t\t\t\thost.field.name()\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tlet res = await db\n\t\t\t\t.from(table)\n\t\t\t\t.select(column)\n\t\t\t\t.where({ [column]: val });\n\n\t\t\treturn !res || !res.length ? opts.message() : true;\n\t\t};\n\t}\n\n\t/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n\t * File upload validators\n\t */\n\n\t/**\n\t * Check that the uploaded file has a given extension\n\t *\n\t * @static\n\t * @param {string[]} extns Allowed extensions\n\t * @param {string} msg Error message to return if not valid\n\t * @returns {IValidator} Configured validation function\n\t */\n\tpublic static fileExtensions(extns: string[], msg: string): IFileValidator {\n\t\treturn async function (file: IFile) {\n\t\t\tfor (let i = 0, ien = extns.length; i < ien; i++) {\n\t\t\t\tif (file.extn.toLowerCase() === extns[i].toLowerCase()) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn msg;\n\t\t};\n\t}\n\n\t/**\n\t * Check that the uploaded file is equal or less than a given size.\n\t *\n\t * @static\n\t * @param {string[]} size Max file size in bytes\n\t * @returns {IValidator} Configured validation function\n\t */\n\tpublic static fileSize(size: number, msg: string): IFileValidator {\n\t\treturn async function (file: IFile) {\n\t\t\treturn file.size > size ? msg : true;\n\t\t};\n\t}\n\n\t/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n\t * Mjoin validators\n\t */\n\n\t/**\n\t * Require a minimum value of the number of options / values submitted in\n\t * an array\n\t *\n\t * @static\n\t * @param size Min array size required to be valid\n\t * @param msg Error message\n\t * @returns {IValidator} Configured validation function\n\t */\n\tpublic static mjoinMinCount(size: number, msg: string): IMjoinValidator {\n\t\treturn async function (editor: Editor, action: string, data: any[]) {\n\t\t\tif (action === 'create' || action === 'edit') {\n\t\t\t\treturn data.length < size ? msg : true;\n\t\t\t}\n\t\t\treturn true;\n\t\t};\n\t}\n\n\t/**\n\t * Require a maximum value of the number of options / values submitted in\n\t * an array\n\t *\n\t * @static\n\t * @param size Max array size required to be valid\n\t * @param msg Error message\n\t * @returns {IValidator} Configured validation function\n\t */\n\tpublic static mjoinMaxCount(size: number, msg: string): IMjoinValidator {\n\t\treturn async function (editor: Editor, action: string, data: any[]) {\n\t\t\tif (action === 'create' || action === 'edit') {\n\t\t\t\treturn data.length > size ? msg : true;\n\t\t\t}\n\t\t\treturn true;\n\t\t};\n\t}\n\n\t/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n\t * Internal methods\n\t */\n\n\tprivate static _common(\n\t\tval: any,\n\t\topts: ValidationOptions,\n\t\tdata: any,\n\t\thost: ValidationHost\n\t): boolean | null {\n\t\t// Check if the validator should be applied. If not, then it will pass (i.e. as if\n\t\t// there was no validator). If the validator should apply, fall through to the actual\n\t\t// validator function.\n\t\tif (Validator._conditional(val, opts, data, host) === false) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// Error state tests\n\t\tif (!opts.optional() && val === null) {\n\t\t\t// Value must be given\n\t\t\treturn false;\n\t\t}\n\n\t\tif (val !== null && opts.empty() === false && val === '') {\n\t\t\t// Value must not be empty\n\t\t\treturn false;\n\t\t}\n\n\t\t// Validate passed states\n\t\tif (opts.optional() && val === null) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (opts.empty() === true && val === '') {\n\t\t\treturn true;\n\t\t}\n\n\t\t// Have the specific validation function perform its tests\n\t\treturn null;\n\t}\n\n\t/**\n\t * Check if this validator should run or not\n\t *\n\t * @param val Field's value\n\t * @param opts Validator options\n\t * @param data Row's submitted data\n\t * @param host Validation host\n\t * @returns `true` if there is no condition, or if there is one and the condition\n\t *   matches, or `false` if there is a condition and it doesn't match.\n\t */\n\tprivate static _conditional(\n\t\tval: any,\n\t\topts: ValidationOptions,\n\t\tdata: any,\n\t\thost: ValidationHost\n\t): boolean {\n\t\tconsole.log('conditional check', opts);\n\t\tif (!opts) {\n\t\t\t// No options, so there can be no condition. Validator applies.\n\t\t\treturn true;\n\t\t}\n\n\t\t// Otherwise, let the options dependency runner return the value\n\t\treturn opts.runDepends(val, data, host);\n\t}\n}\n"]}