{"version":3,"sources":["validators.ts"],"names":[],"mappings":"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","file":"validators.js","sourcesContent":["import * as knex from 'knex';\nimport * as moment from 'moment';\nimport * as validUrl from 'valid-url';\n\nimport Editor from './editor';\nimport Field from './field';\nimport {default as JoinOptions} from './options';\nimport {IFile} from './upload';\nimport ValidationHost from './validationHost';\nimport ValidationOptions from './validationOptions';\n\n// Note that validators return a Promise to allow async validators, such as\n// checking a value is unique against the database\nexport type IValidator = (val: any, data: object, host: ValidationHost) => Promise<true|string>;\nexport type IFileValidator = (file: IFile) => Promise<true|string>;\n\n/**\n * Validation methods for DataTables Editor fields. All of the methods\n * defined in this class return a function that can be used by\n * {@link Field} instance's {@link Field.Validator} method.\n *\n * Each method may define its own parameters that configure how the\n * formatter operates. For example the `minLen` validator takes information\n * on the minimum length of value to accept.\n *\n * Additionally each method can optionally take a `ValidationOptions`\n * instance that controls common validation options and error messages.\n *\n * The validation functions return `true` for valid data and a string for\n * invalid data, with the string being the error message.\n *\n * @export\n * @class Validator\n */\nexport default class Validator {\n\tpublic static Options = ValidationOptions;\n\tpublic static Host = ValidationHost;\n\n\t/**\n\t * No validation - all inputs are valid\n\t *\n\t * @static\n\t * @param {ValidationOptions} [cfg=null] Validation options\n\t * @returns {IValidator} Configured validation function\n\t */\n\tpublic static none( cfg: ValidationOptions = null ): IValidator {\n\t\treturn async function( val: any, data: object, host: ValidationHost ): Promise<true|string> {\n\t\t\treturn true;\n\t\t};\n\t}\n\n\t/**\n\t * Basic validation - this is used to perform the validation provided by the\n\t * validation options only. If the validation options pass (e.g. `required`,\n\t * `empty` and `optional`) then the validation will pass regardless of the\n\t * actual value.\n\t *\n\t * @static\n\t * @param {ValidationOptions} [cfg=null] Validation options\n\t * @returns {IValidator} Configured validation function\n\t */\n\tpublic static basic( cfg: ValidationOptions = null ): IValidator {\n\t\tlet opts = ValidationOptions.select( cfg );\n\n\t\treturn async function( val: any, data: object, host: ValidationHost ): Promise<true|string> {\n\t\t\tlet common = Validator._common( val, opts );\n\n\t\t\treturn common === false ?\n\t\t\t\topts.message :\n\t\t\t\ttrue;\n\t\t};\n\t}\n\n\t/**\n\t * Required field - there must be a value and it must be a non-empty value\n\t *\n\t * @static\n\t * @param {ValidationOptions} [cfg=null] Validation options\n\t * @returns {IValidator} Configured validation function\n\t */\n\tpublic static required( cfg: ValidationOptions = null ): IValidator {\n\t\tlet opts = ValidationOptions.select( cfg );\n\t\topts.empty = false;\n\t\topts.optional = false;\n\n\t\treturn async function( val: any, data: object, host: ValidationHost ): Promise<true|string> {\n\t\t\tlet common = Validator._common( val, opts );\n\n\t\t\treturn common === false ?\n\t\t\t\topts.message :\n\t\t\t\ttrue;\n\t\t};\n\t}\n\n\t/**\n\t * Optional field, but if given there must be a non-empty value\n\t *\n\t * @static\n\t * @param {ValidationOptions} [cfg=null] Validation options\n\t * @returns {IValidator} Configured validation function\n\t */\n\tpublic static notEmpty( cfg: ValidationOptions = null ): IValidator {\n\t\tlet opts = ValidationOptions.select( cfg );\n\t\topts.empty = false;\n\n\t\treturn async function( val: any, data: object, host: ValidationHost ): Promise<true|string> {\n\t\t\tlet common = Validator._common( val, opts );\n\n\t\t\treturn common === false ?\n\t\t\t\topts.message :\n\t\t\t\ttrue;\n\t\t};\n\t}\n\n\t/**\n\t * Validate an input as a boolean value.\n\t *\n\t * @static\n\t * @param {ValidationOptions} [cfg=null] Validation options\n\t * @returns {IValidator} Configured validation function\n\t */\n\tpublic static boolean( cfg: ValidationOptions = null ): IValidator {\n\t\tlet opts = ValidationOptions.select( cfg );\n\n\t\treturn async function( val: any, data: object, host: ValidationHost ): Promise<true|string> {\n\t\t\tlet common = Validator._common( val, opts );\n\t\t\tif ( common !== null ) {\n\t\t\t\treturn common === false ?\n\t\t\t\t\topts.message :\n\t\t\t\t\ttrue;\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tval === true || val === 1 || val === '1' || val === 'true' || val === 't' ||\n\t\t\t\tval === 'on' || val === 'yes' || val === false || val === 0 || val === '0' ||\n\t\t\t\tval === 'false' || val === 'f' || val === 'off' || val === 'no'\n\t\t\t) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn opts.message;\n\t\t};\n\t}\n\n\t/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n\t * Number validation methods\n\t */\n\n\t/**\n\t * Check that any input is numeric.\n\t *\n\t * @static\n\t * @param {string} [decimal='.'] Character to use as the decimal place\n\t * @param {ValidationOptions} [cfg=null] Validation options\n\t * @returns {IValidator} Configured validation function\n\t */\n\tpublic static numeric( decimal: string = '.', cfg: ValidationOptions = null ): IValidator {\n\t\tlet opts = ValidationOptions.select( cfg );\n\n\t\treturn async function( val: any, data: object, host: ValidationHost ): Promise<true|string> {\n\t\t\tlet common = Validator._common( val, opts );\n\t\t\tif ( common !== null ) {\n\t\t\t\treturn common === false ?\n\t\t\t\t\topts.message :\n\t\t\t\t\ttrue;\n\t\t\t}\n\n\t\t\tif ( decimal !== '.' ) {\n\t\t\t\tval = val.toString().replace(decimal, '.');\n\t\t\t}\n\n\t\t\treturn isNaN( parseFloat( val ) ) ?\n\t\t\t\topts.message :\n\t\t\t\ttrue;\n\t\t};\n\t}\n\n\t/**\n\t * Check for a numeric input and that it is greater than a given value.\n\t *\n\t * @static\n\t * @param {number} min Minimum value\n\t * @param {string} [decimal='.'] Character to use as the decimal place\n\t * @param {ValidationOptions} [cfg=null] Validation options\n\t * @returns {IValidator} Configured validation function\n\t */\n\tpublic static minNum( min: number, decimal: string = '.', cfg: ValidationOptions = null ): IValidator {\n\t\tlet opts = ValidationOptions.select( cfg );\n\n\t\treturn async function( val: any, data: object, host: ValidationHost ): Promise<true|string> {\n\t\t\tlet numeric = await Validator.numeric( decimal, opts )( val, data, host );\n\t\t\tif ( numeric !== true ) {\n\t\t\t\treturn opts.message;\n\t\t\t}\n\n\t\t\tif ( decimal !== '.' ) {\n\t\t\t\tval = val.toString().replace(decimal, '.');\n\t\t\t}\n\n\t\t\treturn val < min ?\n\t\t\t\topts.message :\n\t\t\t\ttrue;\n\t\t};\n\t}\n\n\t/**\n\t * Check for a numeric input and that it is less than a given value.\n\t *\n\t * @static\n\t * @param {number} max Maximum value\n\t * @param {string} [decimal='.'] Character to use as the decimal place\n\t * @param {ValidationOptions} [cfg=null] Validation options\n\t * @returns {IValidator} Configured validation function\n\t */\n\tpublic static maxNum( max: number, decimal: string = '.', cfg: ValidationOptions = null ): IValidator {\n\t\tlet opts = ValidationOptions.select( cfg );\n\n\t\treturn async function( val: any, data: object, host: ValidationHost ): Promise<true|string> {\n\t\t\tlet numeric = await Validator.numeric( decimal, opts )( val, data, host );\n\t\t\tif ( numeric !== true ) {\n\t\t\t\treturn opts.message;\n\t\t\t}\n\n\t\t\tif ( decimal !== '.' ) {\n\t\t\t\tval = val.toString().replace(decimal, '.');\n\t\t\t}\n\n\t\t\treturn val > max ?\n\t\t\t\topts.message :\n\t\t\t\ttrue;\n\t\t};\n\t}\n\n\t/**\n\t * Check for a numeric input and that it is in between two given values.\n\t *\n\t * @static\n\t * @param {number} min Minimum value\n\t * @param {number} max Maximum value\n\t * @param {string} [decimal='.'] Character to use as the decimal place\n\t * @param {ValidationOptions} [cfg=null] Validation options\n\t * @returns {IValidator} Configured validation function\n\t */\n\tpublic static minMaxNum(\n\t\tmin: number,\n\t\tmax: number,\n\t\tdecimal: string = '.',\n\t\tcfg: ValidationOptions = null\n\t): IValidator {\n\t\tlet opts = ValidationOptions.select( cfg );\n\n\t\treturn async function( val: any, data: object, host: ValidationHost ): Promise<true|string> {\n\t\t\tlet numeric = await Validator.numeric( decimal, opts )( val, data, host );\n\t\t\tif ( numeric !== true ) {\n\t\t\t\treturn opts.message;\n\t\t\t}\n\n\t\t\tif ( decimal !== '.' ) {\n\t\t\t\tval = val.toString().replace(decimal, '.');\n\t\t\t}\n\n\t\t\treturn val < min || val > max ?\n\t\t\t\topts.message :\n\t\t\t\ttrue;\n\t\t};\n\t}\n\n\t/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n\t * String validation methods\n\t */\n\n\t/**\n\t * Validate an input as an e-mail address.\n\t *\n\t * @static\n\t * @param {ValidationOptions} [cfg=null] Validation options\n\t * @returns {IValidator} Configured validation function\n\t */\n\tpublic static email( cfg: ValidationOptions = null ): IValidator {\n\t\tlet opts = ValidationOptions.select( cfg );\n\n\t\treturn async function( val: any, data: object, host: ValidationHost ): Promise<true|string> {\n\t\t\tlet common = Validator._common( val, opts );\n\t\t\tif ( common !== null ) {\n\t\t\t\treturn common === false ?\n\t\t\t\t\topts.message :\n\t\t\t\t\ttrue;\n\t\t\t}\n\n\t\t\tlet re = /^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i;\n\n\t\t\treturn re.test( val ) ?\n\t\t\t\ttrue :\n\t\t\t\topts.message;\n\t\t};\n\t}\n\n\t/**\n\t * Validate a string has a minimum length.\n\t *\n\t * @static\n\t * @param {number} min Minimum length\n\t * @param {ValidationOptions} [cfg=null] Validation options\n\t * @returns {IValidator} Configured validation function\n\t */\n\tpublic static minLen( min: number, cfg: ValidationOptions = null ): IValidator {\n\t\tlet opts = ValidationOptions.select( cfg );\n\n\t\treturn async function( val: any, data: object, host: ValidationHost ): Promise<true|string> {\n\t\t\tlet common = Validator._common( val, opts );\n\t\t\tif ( common !== null ) {\n\t\t\t\treturn common === false ?\n\t\t\t\t\topts.message :\n\t\t\t\t\ttrue;\n\t\t\t}\n\n\t\t\treturn val.length < min ?\n\t\t\t\topts.message :\n\t\t\t\ttrue;\n\t\t};\n\t}\n\n\t/**\n\t * Validate a string is less or equal to a maximum length.\n\t *\n\t * @static\n\t * @param {number} max Maximum length\n\t * @param {ValidationOptions} [cfg=null] Validation options\n\t * @returns {IValidator} Configured validation function\n\t */\n\tpublic static maxLen( max: number, cfg: ValidationOptions = null ): IValidator {\n\t\tlet opts = ValidationOptions.select( cfg );\n\n\t\treturn async function( val: any, data: object, host: ValidationHost ): Promise<true|string> {\n\t\t\tlet common = Validator._common( val, opts );\n\t\t\tif ( common !== null ) {\n\t\t\t\treturn common === false ?\n\t\t\t\t\topts.message :\n\t\t\t\t\ttrue;\n\t\t\t}\n\n\t\t\treturn val.length > max ?\n\t\t\t\topts.message :\n\t\t\t\ttrue;\n\t\t};\n\t}\n\n\t/**\n\t * Require a string with a certain minimum or maximum number of characters.\n\t *\n\t * @static\n\t * @param {number} min Minimum length\n\t * @param {number} max Maximum length\n\t * @param {ValidationOptions} [cfg=null] Validation options\n\t * @returns {IValidator} Configured validation function\n\t */\n\tpublic static minMaxLen( min: number, max: number, cfg: ValidationOptions = null ): IValidator {\n\t\tlet opts = ValidationOptions.select( cfg );\n\n\t\treturn async function( val: any, data: object, host: ValidationHost ): Promise<true|string> {\n\t\t\tlet common = Validator._common( val, opts );\n\t\t\tif ( common !== null ) {\n\t\t\t\treturn common === false ?\n\t\t\t\t\topts.message :\n\t\t\t\t\ttrue;\n\t\t\t}\n\n\t\t\treturn val.length < min || val.length > max ?\n\t\t\t\topts.message :\n\t\t\t\ttrue;\n\t\t};\n\t}\n\n\t/**\n\t * Validate as an IP address.\n\t *\n\t * @static\n\t * @param {ValidationOptions} [cfg=null] Validation options\n\t * @returns {IValidator} Configured validation function\n\t */\n\tpublic static ip( cfg: ValidationOptions = null ): IValidator {\n\t\tlet opts = ValidationOptions.select( cfg );\n\n\t\treturn async function( val: any, data: object, host: ValidationHost ): Promise<true|string> {\n\t\t\tlet common = Validator._common( val, opts );\n\t\t\tif ( common !== null ) {\n\t\t\t\treturn common === false ?\n\t\t\t\t\topts.message :\n\t\t\t\t\ttrue;\n\t\t\t}\n\n\t\t\tlet a = val.split('.');\n\t\t\tif ( a.length !== 4 ) {\n\t\t\t\treturn opts.message;\n\t\t\t}\n\n\t\t\tfor ( let i = 0 ; i < 4 ; i++ ) {\n\t\t\t\tlet parsed = parseInt( a[i], 10 );\n\t\t\t\tif ( parsed !== a[i] * 1 ) {\n\t\t\t\t\treturn opts.message;\n\t\t\t\t}\n\n\t\t\t\tif ( parsed < 0 || parsed > 255 ) {\n\t\t\t\t\treturn opts.message;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn true;\n\t\t};\n\t}\n\n\t/**\n\t * Validate as a URL.\n\t *\n\t * @static\n\t * @param {ValidationOptions} [cfg=null] Validation options\n\t * @returns {IValidator} Configured validation function\n\t */\n\tpublic static url( cfg: ValidationOptions = null ): IValidator {\n\t\tlet opts = ValidationOptions.select( cfg );\n\n\t\treturn async function( val: any, data: object, host: ValidationHost ): Promise<true|string> {\n\t\t\tlet common = Validator._common( val, opts );\n\t\t\tif ( common !== null ) {\n\t\t\t\treturn common === false ?\n\t\t\t\t\topts.message :\n\t\t\t\t\ttrue;\n\t\t\t}\n\n\t\t\treturn ! validUrl.isHttpUri( val ) ?\n\t\t\t\topts.message :\n\t\t\t\ttrue;\n\t\t};\n\t}\n\n\t/**\n\t * Check if string could contain an XSS attack string\n\t *\n\t * @static\n\t * @param {ValidationOptions} [cfg=null] Validation options\n\t * @returns {IValidator} Configured validation function\n\t */\n\tpublic static xss( cfg: ValidationOptions = null ): IValidator {\n\t\tlet opts = ValidationOptions.select( cfg );\n\n\t\treturn async function( val: any, data: object, host: ValidationHost ): Promise<true|string> {\n\t\t\tlet common = Validator._common( val, opts );\n\t\t\tif ( common !== null ) {\n\t\t\t\treturn common === false ?\n\t\t\t\t\topts.message :\n\t\t\t\t\ttrue;\n\t\t\t}\n\n\t\t\tlet field = host.field;\n\n\t\t\treturn field.xssSafety( val ) !== val ?\n\t\t\t\topts.message :\n\t\t\t\ttrue;\n\t\t};\n\t}\n\n\t/**\n\t * Confirm that the value submitted is in a list of allowable values\n\t *\n\t * @static\n\t * @param {any[]} values List of values that are valid\n\t * @param {ValidationOptions} [cfg=null] Validation options\n\t * @returns {IValidator} Configured validation function\n\t */\n\tpublic static values( values: any[], cfg: ValidationOptions = null ): IValidator {\n\t\tlet opts = ValidationOptions.select( cfg );\n\n\t\treturn async function( val: any, data: object, host: ValidationHost ): Promise<true|string> {\n\t\t\tlet common = Validator._common( val, opts );\n\t\t\tif ( common !== null ) {\n\t\t\t\treturn common === false ?\n\t\t\t\t\topts.message :\n\t\t\t\t\ttrue;\n\t\t\t}\n\n\t\t\treturn values.includes( val ) ?\n\t\t\t\ttrue :\n\t\t\t\topts.message;\n\t\t};\n\t}\n\n\t/**\n\t * Ensure that the submitted string does not contain HTML tags\n\t *\n\t * @static\n\t * @param {ValidationOptions} [cfg=null] Validation options\n\t * @returns {IValidator} Configured validation function\n\t */\n\tpublic static noTags( cfg: ValidationOptions = null ): IValidator {\n\t\tlet opts = ValidationOptions.select( cfg );\n\n\t\treturn async function( val: any, data: object, host: ValidationHost ): Promise<true|string> {\n\t\t\tlet common = Validator._common( val, opts );\n\t\t\tif ( common !== null ) {\n\t\t\t\treturn common === false ?\n\t\t\t\t\topts.message :\n\t\t\t\t\ttrue;\n\t\t\t}\n\n\t\t\treturn val.toString().test(/<.*>/) ?\n\t\t\t\topts.message :\n\t\t\t\ttrue;\n\t\t};\n\t}\n\n\t/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n\t* Date validation methods\n\t*/\n\n\t/**\n\t * Check that a valid date input is given. Uses MomentJS\n\t *\n\t * @static\n\t * @param {string} format MomentJS date format\n\t * @param {string} [locale=null] MomentJS locale\n\t * @param {ValidationOptions} [cfg=null] Validation options\n\t * @returns {IValidator} Configured validation function\n\t */\n\tpublic static dateFormat( format: string, locale: string = null, cfg: ValidationOptions = null ): IValidator {\n\t\tlet opts = ValidationOptions.select( cfg );\n\n\t\treturn async function( val: any, data: object, host: ValidationHost ): Promise<true|string> {\n\t\t\tlet common = Validator._common( val, opts );\n\t\t\tif ( common !== null ) {\n\t\t\t\treturn common === false ?\n\t\t\t\t\topts.message :\n\t\t\t\t\ttrue;\n\t\t\t}\n\n\t\t\tlet res = locale ?\n\t\t\t\tmoment( val, format, locale, true ).isValid() :\n\t\t\t\tmoment( val, format, true ).isValid();\n\n\t\t\treturn ! res ?\n\t\t\t\topts.message :\n\t\t\t\ttrue;\n\t\t};\n\t}\n\n\t/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n\t* Database validation\n\t*/\n\n\t/**\n\t * Check that the given value is unique in the database\n\t *\n\t * @static\n\t * @param {ValidationOptions} [cfg=null] Validation options\n\t * @param {string} [column=null] Column name to use to check as a unique\n\t *   value. If not given the host field's database column name is used\n\t * @param {string} [table=null] Table to check that this value is uniquely\n\t *   valid on. If not given the host Editor's table name is used\n\t * @param {knex} [db=null] Database connection. If not given the host\n\t *   Editor's database connection is used\n\t * @returns {IValidator} Configured validation function\n\t */\n\tpublic static dbUnique(\n\t\tcfg: ValidationOptions = null,\n\t\tcolumn: string = null,\n\t\ttable: string = null,\n\t\tdb: knex = null\n\t): IValidator {\n\t\tlet opts = ValidationOptions.select( cfg );\n\n\t\treturn async function( val: any, data: object, host: ValidationHost ): Promise<true|string> {\n\t\t\tlet common = Validator._common( val, opts );\n\t\t\tif ( common !== null ) {\n\t\t\t\treturn common === false ?\n\t\t\t\t\topts.message :\n\t\t\t\t\ttrue;\n\t\t\t}\n\n\t\t\tif ( db === null ) {\n\t\t\t\tdb = host.db;\n\t\t\t}\n\n\t\t\tif ( table === null ) {\n\t\t\t\ttable = host.editor.table()[0];\n\t\t\t}\n\n\t\t\tif ( column === null ) {\n\t\t\t\tcolumn = host.field.dbField();\n\t\t\t}\n\n\t\t\tlet q = host.db()( table )\n\t\t\t\t.select( column )\n\t\t\t\t.where( { column: val } );\n\n\t\t\t// If doing an edit then we need to also discount the current row,\n\t\t\t// since it is of course already validly unique\n\t\t\tif ( host.action === 'edit' ) {\n\t\t\t\tlet cond = host.editor.pkeyToObject( host.id, true );\n\t\t\t\tq.whereNot( cond );\n\t\t\t}\n\n\t\t\tlet res = await q;\n\n\t\t\treturn ! res ?\n\t\t\t\topts.message :\n\t\t\t\ttrue;\n\t\t};\n\t}\n\n\t/**\n\t * Check that the given value is a value that is available in a database -\n\t * i.e. a join primary key. This will attempt to automatically use the table\n\t * name and value column from the field's `Options` method (under the\n\t * assumption that it will typically be used with a joined field), but the\n\t * table and field can also be specified via the options.\n\t *\n\t * @static\n\t * @param {ValidationOptions} [cfg=null] Validation options\n\t * @param {string} [column=null] Column name to use to check as a unique\n\t *   value. If not given the host field's database column name is used\n\t * @param {string} [table=null] Table to check that this value is uniquely\n\t *   valid on. If not given the host Editor's table name is used\n\t * @param {knex} [db=null] Database connection. If not given the host\n\t *   Editor's database connection is used\n\t * @returns {IValidator} Configured validation function\n\t */\n\tpublic static dbValues(\n\t\tcfg: ValidationOptions = null,\n\t\tcolumn: string = null,\n\t\ttable: string = null,\n\t\tdb: knex = null,\n\t\tvalues: any[] = []\n\t): IValidator {\n\t\tlet opts = ValidationOptions.select( cfg );\n\n\t\treturn async function( val: any, data: object, host: ValidationHost ): Promise<true|string> {\n\t\t\tlet common = Validator._common( val, opts );\n\t\t\tlet options = host.field.options();\n\n\t\t\tif ( common !== null ) {\n\t\t\t\treturn common === false ?\n\t\t\t\t\topts.message :\n\t\t\t\t\ttrue;\n\t\t\t}\n\n\t\t\tif ( values.indexOf(val) !== -1 ) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif ( db === null ) {\n\t\t\t\tdb = host.db;\n\t\t\t}\n\n\t\t\tif ( table === null && options instanceof JoinOptions ) {\n\t\t\t\ttable = options.table();\n\t\t\t}\n\n\t\t\tif ( column === null && options instanceof JoinOptions ) {\n\t\t\t\tcolumn = options.value();\n\t\t\t}\n\n\t\t\tif ( table === null || column === null ) {\n\t\t\t\tthrow new Error( 'Table or column for database value check is not ' +\n\t\t\t\t\t'defined for field ' + host.field.name()\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tlet res = await db( table )\n\t\t\t\t.select( column )\n\t\t\t\t.where( { [column]: val } );\n\n\t\t\treturn ! res ?\n\t\t\t\topts.message :\n\t\t\t\ttrue;\n\t\t};\n\t}\n\n\t/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n\t* File upload validators\n\t*/\n\n\t/**\n\t * Check that the uploaded file has a given extension\n\t *\n\t * @static\n\t * @param {string[]} extns Allowed extensions\n\t * @param {string} msg Error message to return if not valid\n\t * @returns {IValidator} Configured validation function\n\t */\n\tpublic static fileExtensions( extns: string[], msg: string ): IFileValidator {\n\t\treturn async function( file: IFile ) {\n\t\t\tfor ( let i = 0, ien = extns.length; i < ien; i++ ) {\n\t\t\t\tif ( file.extn.toLowerCase() === extns[i].toLowerCase() ) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn msg;\n\t\t};\n\t}\n\n\t/**\n\t * Check that the uploaded file is equal or less than a given size.\n\t *\n\t * @static\n\t * @param {string[]} size Max file size in bytes\n\t * @returns {IValidator} Configured validation function\n\t */\n\tpublic static fileSize( size: number, msg: string ): IFileValidator {\n\t\treturn async function( file: IFile ) {\n\t\t\treturn file.size > size ?\n\t\t\t\tmsg :\n\t\t\t\ttrue;\n\t\t};\n\t}\n\n\t/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n\t* Internal methods\n\t*/\n\n\tprivate static _common( val: any, opts: ValidationOptions ): boolean|null {\n\t\t// Error state tests\n\t\tif ( !opts.optional && val === null ) {\n\t\t\t// Value must be given\n\t\t\treturn false;\n\t\t}\n\n\t\tif ( val !== null && opts.empty === false && val === '' ) {\n\t\t\t// Value must not be empty\n\t\t\treturn false;\n\t\t}\n\n\t\t// Validate passed states\n\t\tif ( opts.optional && val === null ) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif ( opts.empty === true && val === '' ) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// Have the specific validation function perform its tests\n\t\treturn null;\n\t}\n}\n"]}